use ml::ImagePrecision;
use ndarray::{Array, Array3};

use crate::{CodingResult, Decoder, EncodedData, Encoder};
#[allow(dead_code)]

/// A dummy coder that can be used for dummy encoding and decoding.
/// It saves the data it receives at the encoding step and reproduces it later
/// at the decoding step.
pub struct DummyCoder {}

impl DummyCoder {
    pub fn new() -> Self {
        Self {}
    }
}

impl<T> Encoder<T> for DummyCoder {
    fn encode(&mut self, _: &T) -> EncodedData {
        EncodedData::new(
            vec![
                211, 168, 165, 211, 170, 167, 214, 173, 171, 213, 175, 173, 213, 175, 175, 207,
                173, 173, 205, 170, 174, 200, 169, 172, 212, 180, 185, 204, 177, 181, 198, 169,
                178, 189, 162, 171, 184, 156, 169, 179, 151, 164, 174, 148, 161, 160, 144, 167,
                142, 142, 190, 105, 114, 171, 38, 40, 94, 50, 47, 96, 57, 48, 91, 119, 105, 141,
                179, 159, 188, 167, 144, 166, 175, 147, 166, 178, 150, 163, 182, 153, 162, 182,
                157, 161, 184, 159, 163, 183, 161, 163, 183, 163, 162, 183, 163, 162, 217, 174,
                171, 217, 174, 171, 215, 174, 172, 213, 174, 172, 213, 175, 175, 211, 175, 175,
                209, 174, 178, 206, 175, 178, 214, 182, 187, 203, 175, 181, 196, 167, 176, 193,
                166, 175, 195, 167, 180, 194, 166, 179, 186, 160, 173, 169, 151, 174, 124, 124,
                170, 87, 94, 149, 74, 76, 130, 88, 85, 134, 97, 89, 130, 88, 74, 110, 169, 149,
                178, 188, 165, 187, 180, 152, 171, 181, 153, 166, 182, 153, 162, 180, 155, 159,
                178, 155, 159, 180, 158, 160, 180, 160, 159, 181, 161, 160, 220, 177, 174, 219,
                176, 173, 215, 174, 172, 212, 173, 171, 211, 173, 173, 211, 175, 175, 212, 177,
                181, 211, 180, 183, 210, 178, 183, 198, 170, 176, 192, 163, 172, 194, 167, 176,
                201, 175, 188, 203, 177, 190, 193, 167, 180, 172, 154, 177, 119, 116, 161, 84, 88,
                141, 86, 87, 138, 114, 111, 157, 124, 114, 156, 104, 88, 122, 167, 147, 176, 188,
                165, 187, 182, 156, 174, 182, 156, 169, 181, 154, 163, 179, 154, 158, 176, 153,
                157, 177, 155, 157, 178, 157, 159, 179, 158, 160, 218, 175, 172, 218, 175, 172,
                215, 174, 172, 213, 174, 172, 213, 173, 174, 211, 174, 176, 211, 176, 180, 209,
                176, 180, 203, 170, 177, 196, 165, 172, 191, 162, 171, 193, 166, 176, 198, 172,
                185, 199, 173, 186, 189, 163, 176, 169, 151, 174, 112, 108, 150, 96, 97, 148, 79,
                76, 125, 114, 107, 152, 108, 97, 137, 140, 124, 158, 170, 151, 178, 171, 148, 170,
                180, 154, 172, 180, 154, 167, 181, 154, 163, 179, 156, 161, 178, 155, 159, 177,
                155, 157, 176, 155, 157, 176, 155, 157, 217, 173, 172, 219, 175, 174, 219, 178,
                176, 218, 179, 177, 218, 178, 179, 214, 177, 179, 210, 175, 179, 206, 173, 177,
                203, 170, 177, 201, 170, 177, 199, 170, 179, 197, 170, 180, 194, 168, 181, 189,
                165, 177, 184, 159, 173, 171, 153, 176, 112, 106, 147, 100, 97, 146, 85, 79, 126,
                106, 98, 139, 103, 90, 128, 150, 133, 166, 176, 154, 182, 167, 144, 166, 172, 148,
                166, 176, 151, 165, 180, 155, 165, 183, 160, 165, 183, 160, 164, 180, 159, 162,
                177, 156, 158, 175, 154, 156, 219, 175, 174, 221, 180, 178, 225, 184, 182, 226,
                186, 187, 224, 185, 187, 218, 181, 183, 212, 175, 179, 204, 170, 176, 208, 175,
                182, 209, 178, 187, 208, 178, 189, 199, 174, 184, 190, 166, 178, 182, 160, 172,
                182, 159, 173, 177, 160, 181, 146, 138, 175, 94, 89, 134, 95, 86, 129, 106, 95,
                135, 145, 131, 167, 160, 144, 175, 184, 165, 190, 166, 145, 167, 169, 145, 163,
                175, 150, 164, 180, 156, 166, 185, 162, 170, 186, 164, 169, 183, 162, 165, 179,
                158, 161, 176, 155, 157, 220, 179, 177, 222, 183, 181, 226, 186, 187, 228, 188,
                189, 225, 186, 188, 218, 181, 183, 212, 175, 179, 203, 169, 175, 207, 174, 181,
                205, 176, 185, 202, 175, 185, 194, 169, 179, 182, 160, 172, 177, 157, 170, 179,
                161, 174, 179, 164, 185, 165, 156, 189, 100, 92, 132, 95, 87, 124, 111, 101, 137,
                154, 141, 173, 167, 152, 180, 184, 165, 190, 170, 151, 172, 167, 148, 165, 173,
                153, 166, 179, 157, 169, 185, 162, 170, 186, 164, 169, 184, 163, 166, 180, 159,
                162, 178, 157, 160, 219, 180, 178, 221, 183, 181, 224, 184, 185, 224, 186, 186,
                222, 183, 185, 215, 178, 182, 207, 171, 177, 201, 167, 174, 202, 168, 178, 198,
                169, 178, 191, 166, 176, 181, 159, 171, 174, 154, 167, 170, 153, 166, 173, 159,
                171, 175, 163, 181, 140, 132, 162, 111, 104, 137, 102, 93, 126, 121, 110, 142, 111,
                99, 129, 151, 138, 164, 164, 150, 174, 181, 164, 185, 171, 153, 170, 173, 155, 168,
                178, 158, 170, 182, 161, 170, 184, 161, 169, 183, 161, 166, 181, 160, 163, 179,
                158, 161, 213, 175, 175, 218, 182, 182, 228, 190, 190, 225, 189, 189, 214, 177,
                179, 205, 168, 172, 208, 172, 178, 216, 183, 190, 210, 179, 188, 206, 179, 188,
                192, 168, 178, 185, 165, 177, 172, 155, 168, 184, 172, 184, 156, 146, 159, 142,
                134, 151, 133, 127, 152, 110, 105, 134, 91, 83, 113, 125, 118, 145, 109, 100, 126,
                57, 49, 72, 94, 85, 106, 115, 103, 123, 132, 119, 135, 156, 141, 155, 176, 158,
                171, 189, 170, 179, 185, 164, 172, 187, 165, 170, 194, 171, 175, 175, 152, 156,
                207, 173, 173, 212, 178, 178, 218, 184, 184, 218, 184, 185, 209, 174, 178, 202,
                167, 171, 204, 170, 177, 213, 180, 187, 205, 176, 185, 204, 179, 189, 200, 178,
                190, 195, 179, 190, 152, 140, 152, 124, 116, 127, 82, 75, 88, 69, 66, 82, 111, 109,
                129, 113, 109, 134, 100, 97, 119, 132, 129, 151, 96, 93, 115, 40, 38, 58, 48, 44,
                63, 56, 48, 65, 68, 58, 74, 90, 77, 91, 141, 124, 137, 173, 156, 167, 179, 158,
                167, 181, 158, 166, 178, 155, 160, 169, 146, 150, 204, 174, 173, 205, 175, 174,
                209, 177, 178, 209, 177, 178, 204, 171, 175, 199, 168, 171, 203, 170, 177, 208,
                177, 184, 204, 177, 186, 197, 176, 185, 187, 170, 181, 178, 166, 178, 110, 101,
                114, 60, 58, 70, 36, 36, 50, 44, 45, 59, 96, 96, 114, 117, 117, 135, 97, 97, 115,
                115, 115, 133, 64, 66, 84, 35, 37, 55, 38, 38, 56, 48, 47, 63, 39, 34, 49, 53, 44,
                57, 130, 118, 130, 175, 158, 169, 180, 159, 168, 187, 163, 171, 177, 151, 157, 184,
                158, 164, 201, 176, 174, 200, 175, 173, 202, 174, 174, 203, 175, 175, 201, 172,
                175, 199, 169, 174, 202, 171, 178, 204, 177, 186, 199, 174, 184, 191, 172, 181,
                174, 160, 172, 161, 153, 164, 81, 77, 89, 38, 40, 51, 39, 42, 56, 54, 60, 73, 77,
                83, 96, 112, 118, 131, 84, 90, 103, 88, 93, 108, 34, 41, 56, 36, 43, 58, 47, 52,
                67, 74, 77, 92, 52, 52, 66, 55, 50, 65, 140, 130, 143, 170, 153, 166, 164, 142,
                154, 178, 153, 163, 170, 143, 152, 188, 160, 166, 201, 177, 177, 198, 174, 174,
                200, 174, 174, 202, 176, 176, 201, 174, 177, 199, 172, 176, 201, 173, 179, 202,
                178, 186, 189, 165, 175, 191, 174, 183, 178, 166, 178, 166, 162, 173, 82, 82, 94,
                38, 44, 55, 40, 49, 62, 37, 47, 57, 55, 65, 75, 102, 111, 120, 82, 92, 102, 78, 88,
                98, 27, 39, 51, 33, 44, 58, 37, 46, 60, 71, 78, 93, 84, 87, 101, 80, 77, 92, 159,
                150, 163, 176, 162, 174, 158, 138, 150, 179, 154, 164, 179, 150, 159, 191, 160,
                169, 198, 177, 176, 197, 176, 175, 197, 176, 175, 201, 177, 179, 199, 174, 178,
                195, 170, 174, 197, 170, 179, 199, 176, 184, 186, 165, 174, 188, 172, 183, 171,
                163, 174, 167, 166, 176, 81, 85, 96, 35, 45, 55, 40, 54, 66, 24, 39, 48, 47, 61,
                67, 88, 102, 108, 79, 93, 99, 66, 82, 89, 28, 43, 52, 25, 41, 53, 30, 43, 57, 77,
                88, 102, 98, 106, 119, 81, 82, 96, 148, 141, 154, 184, 170, 182, 171, 151, 163,
                185, 160, 170, 191, 162, 171, 192, 161, 170, 193, 173, 172, 193, 173, 172, 196,
                175, 177, 198, 176, 178, 194, 171, 175, 189, 166, 170, 190, 166, 174, 193, 172,
                180, 185, 166, 175, 175, 161, 172, 155, 149, 160, 166, 167, 177, 78, 87, 97, 27,
                39, 51, 41, 57, 69, 29, 48, 56, 44, 60, 66, 73, 90, 93, 70, 89, 92, 54, 74, 79, 32,
                51, 59, 19, 37, 48, 30, 46, 59, 91, 104, 118, 93, 102, 116, 48, 51, 65, 94, 90,
                102, 166, 154, 166, 172, 152, 164, 172, 147, 157, 187, 156, 165, 182, 148, 158,
                188, 168, 167, 191, 171, 170, 195, 175, 174, 196, 175, 177, 190, 169, 172, 183,
                162, 165, 182, 161, 169, 189, 168, 176, 179, 162, 173, 165, 151, 162, 154, 146,
                157, 181, 182, 192, 93, 99, 110, 22, 37, 46, 33, 52, 60, 24, 46, 52, 33, 52, 57,
                58, 77, 80, 70, 91, 93, 55, 77, 82, 42, 64, 70, 11, 32, 40, 15, 36, 44, 76, 94,
                105, 105, 117, 129, 35, 41, 52, 61, 60, 70, 161, 152, 162, 181, 164, 173, 170, 146,
                156, 191, 162, 171, 185, 154, 161, 190, 169, 167, 190, 169, 167, 185, 165, 164,
                181, 163, 164, 183, 166, 169, 186, 172, 174, 188, 170, 177, 183, 165, 172, 181,
                161, 173, 177, 161, 172, 169, 158, 168, 170, 165, 174, 97, 103, 110, 23, 37, 43,
                28, 49, 51, 24, 47, 49, 29, 49, 54, 61, 81, 86, 57, 77, 82, 54, 76, 81, 51, 75, 81,
                26, 51, 55, 13, 38, 42, 11, 33, 38, 29, 45, 51, 42, 53, 57, 49, 54, 57, 110, 107,
                109, 172, 161, 164, 177, 160, 164, 177, 154, 158, 181, 156, 160, 192, 170, 165,
                190, 170, 165, 185, 165, 164, 179, 164, 162, 181, 167, 169, 185, 172, 174, 186,
                170, 177, 181, 165, 172, 181, 161, 173, 178, 161, 172, 171, 157, 168, 172, 164,
                174, 99, 103, 108, 25, 37, 41, 28, 49, 50, 22, 47, 49, 29, 49, 54, 61, 80, 87, 55,
                77, 83, 52, 76, 82, 51, 76, 80, 24, 51, 55, 11, 39, 40, 9, 34, 36, 26, 46, 47, 40,
                54, 53, 47, 55, 55, 107, 107, 107, 170, 162, 163, 176, 162, 164, 177, 156, 158,
                180, 158, 160,
            ],
            vec![2u32],
        )
    }
}

impl Decoder<Array3<ImagePrecision>> for DummyCoder {
    fn decode(&mut self, data: EncodedData) -> CodingResult<Array3<ImagePrecision>> {
        let arr = Array::from_shape_vec((18, 32, 3), data.main_info)
            .unwrap()
            .map(|x| *x as f32);
        Ok(arr)
    }
}
/// A dummy decoder that only returns nonsense data but may be used in prototyping systems.
pub struct ErrorDecoder {}

impl<T: std::fmt::Debug> Decoder<T> for ErrorDecoder {
    /// Dummy decode method, just returns a decode error
    fn decode(&mut self, _: EncodedData) -> CodingResult<T> {
        return Err(crate::coding_errors::CodingError::DecodingError);
    }
}

/// A dummy encoder that only returns nonsense data but may be used in prototyping systems.
pub struct DummyEncoder {}

impl<T: std::fmt::Debug> Encoder<T> for DummyEncoder {
    /// Dummy encode method, prints a message of the encoded data and returns nonsense data.
    fn encode(&mut self, data: &T) -> EncodedData {
        println!("Stub encoder called with data {:?}", data);
        EncodedData::new(Vec::new(), Vec::new())
    }
}
